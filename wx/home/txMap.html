<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>您当前的位置</title>
<style type="text/css">
*{
    margin:0px;
    padding:0px;
}
body, button, input, select, textarea {
    font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
}
/*#container{
  min-width:600px;
  min-height:767px;
  }*/
</style>
<script charset="utf-8" src="http://map.qq.com/api/js?v=ZHNBZ-3PX3W-7VCRP-OZPQK-K5ASZ-NUB5N&libraries=convertor"></script>
<script>
function getLocation(){
	  if (navigator.geolocation)
	    {
	    navigator.geolocation.getCurrentPosition(showPosition,showError);
	    }
	  else{x.innerHTML="浏览器不支持定位.";}
	  }
	
	
	
	function showPosition(position){
	  	var width = document.documentElement.clientWidth;
		var height = document.documentElement.clientHeight;
		document.getElementById("container").style.height = height+"px";
		document.getElementById("container").style.width = width+"px";
		var lat=position.coords.latitude; 
		var lng=position.coords.longitude;
		qq.maps.convertor.translate(new qq.maps.LatLng(lat,lng), 1, function(res){
		     latlng = res[0];
		  var map = new qq.maps.Map(document.getElementById("container"),{
		        center:  latlng, 
		        zoom: 25
		    });
		    //设置marker标记
		   var marker = new qq.maps.Marker({
		            map : map,
		            position : latlng
		        });
		    });
	  }
	  
	  
	function showError(error){
		switch(error.code) 
		  {
		  case error.PERMISSION_DENIED:
		   window.location.href = "index.jsp"
		    break;
		  case error.POSITION_UNAVAILABLE:
		    x.innerHTML="位置信息是不可用的。"
		    break;
		  case error.TIMEOUT:
		    x.innerHTML="请求用户地理位置超时。"
		    break;
		  case error.UNKNOWN_ERROR:
		    x.innerHTML="未知错误。"
		    break;
		  }
	}
	  
	  
</script>

</head>
<body onload="getLocation()">
 <div  id="container"></div>

</body>
</html>
